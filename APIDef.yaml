swagger: '2.0'
info:
  description: This is a Push Notif Service
  version: 1.0.0
  title: Push Notif API
  # put the contact info for your development or API team
  contact:
    email: test@nobackend.id

  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html

# tags are used for organizing operations
tags:
- name: developers
  description: Operations available to regular developers

paths:
  /push/notifiers:
    post:
      tags:
      - developers
      summary: create a notifier
      operationId: createNotifier
      description: |
        By passing in the appropriate params, you can create a notifier to register your server key from (FCM or APNS)
      consumes:
      - application/json
      parameters:
        - in: body
          name: notifier
          description: The requested notifier body.
          schema:
            $ref: '#/definitions/NotifierRequest'
            #   name: name
            #   description: pass a notifier name for registering
            #   name: provider
            #   description: pass a provider name (google or apple)
            #   name: apiKey
            #   description: pass a server key from (FCM or APNS)
      responses:
        201:
          description: notifier data created
          schema:
            $ref: '#/definitions/DefaultResponse'
        400:
          description: bad input parameters
          schema:
            $ref: '#/definitions/ErrorResponse'

  /push/device:
    post:
      tags:
      - developers
      summary: push to devices list
      operationId: pushToDevices
      description: |
        By passing in the appropriate params, you can sends push notification to a list of devices
      consumes:
      - application/json
      parameters:
        - in: body
          name: payloads
          description: The message and notifier destination.
          schema:
            $ref: '#/definitions/NotifierRequest'
            #   name: name
            #   description: pass a notifier name for registering
            #   name: provider
            #   description: pass a provider name (google or apple)
            #   name: apiKey
            #   description: pass a server key from (FCM or APNS)
      responses:
        200:
          description: sends successful
          schema:
            $ref: '#/definitions/DefaultResponse'
        400:
          description: bad input parameters
          schema:
            $ref: '#/definitions/ErrorResponse'
  
  /push/topic:
    post:
      tags:
      - developers
      summary: push to specific topic
      operationId: pushToTopic
      description: |
        By passing in the appropriate params, you can sends push notification to specific topic
      consumes:
      - application/json
      parameters:
        - in: body
          name: payloads
          description: The message and notifier destination.
          schema:
            $ref: '#/definitions/NotifierRequest'
            #   name: name
            #   description: pass a notifier name for registering
            #   name: provider
            #   description: pass a provider name (google or apple)
            #   name: apiKey
            #   description: pass a server key from (FCM or APNS)
      responses:
        200:
          description: sends successful
          schema:
            $ref: '#/definitions/DefaultResponse'
        400:
          description: bad input parameters
          schema:
            $ref: '#/definitions/ErrorResponse'

definitions:
  ErrorResponse:
    type: object
    required:
    - requestID
    - now
    - code
    - message
    properties:
      requestID:
        type: string
        format: uuidv4
        example: "02010ce8-6878-4547-b3c0-e5592086a802"
      now:
        type: integer
        format: unix_timestamp
        example: 1511859232
      message:
        type: string
        example: "Duplicate entry"
      code:
        type: string
        example: "40001"
        
        
  DefaultResponse:
    type: object
    required:
    - requestID
    - now
    - code
    - message
    - data
    properties:
      requestID:
        type: string
        format: uuidv4
        example: "02010ce8-6878-4547-b3c0-e5592086a802"
      now:
        type: integer
        format: unix_timestamp
        example: 1511859232
      message:
        type: string
        example: "OK"
      code:
        type: string
        example: "20001"
      data:
        $ref: '#/definitions/NotifierItem'
          
          
  NotifierRequest:
    type: object
    properties:
      name:
        type: string
        example: "Android Apps"
      provider:
        type: string
        example: "google"
      apiKey:
        type: string
        example: "AIzaSyBfy61U9IJVm7kl5lIPV6D3WvrHYwS3Mxg"
        
  NotifierItem:
    type: object
    properties:
      id:
        type: integer
        example: 0
      name:
        type: string
        example: "Android Apps"
      provider:
        type: string
        example: "google"
      apiKey:
        type: string
        example: "AIzaSyBfy61U9IJVm7kl5lIPV6D3WvrHYwS3Mxg"
      createdAt:
        type: integer
        format: unix_timestamp
        example: 1511859232
      updatedAt:
        type: integer
        format: unix_timestamp
        example: 1511859233
      deletedAt:
        type: integer
        format: unix_timestamp
        example: 1511859233
  
  PushNotifRequest:
    type: object
    properties:
      notifier:
        type: string
        example: "Android Apps"
      message:
        $ref: '#/definitions/MessageItem'
  
  MessageItem:
    type: object
    properties:
      title:
        type: string
        example: "Title here!"
      body:
        type: string
        example: "Hello, this is messages!"
# Added by API Auto Mocking Plugin
# host: nobackend.id
# basePath: /NoBackend/api/v1/pushnotif
schemes:
 - https
# Added by API Auto Mocking Plugin
# basePath: /NoBackend/push-notif/1.0.0
# Added by API Auto Mocking Plugin
# basePath: /api/v1/
# Added by API Auto Mocking Plugin
# host: nobackend.id
# basePath: /api/v1
# Added by API Auto Mocking Plugin
host: virtserver.swaggerhub.com
basePath: /NoBackend/push-notifier/1.0.0